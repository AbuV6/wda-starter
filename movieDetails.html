<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Details</title>

  <!-- Tailwind Dark Mode Configuration -->
  <script>
    tailwind.config = { darkMode: 'media' }
  </script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Alpine.js for interactivity -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Custom JS -->
  <script src="./js/scripts.js"></script>
</head>
<body class="bg-gray-100 text-gray-900 dark:bg-gray-900 dark:text-gray-100">

  <!-- Navigation Bar -->
  <nav class="bg-blue-600 text-white dark:bg-blue-800">
    <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
      <a href="index.html" class="text-xl font-bold hover:text-gray-200">üé¨ AbuFlix</a>
      <div class="space-x-4 flex items-center">
        <a
          href="index.html"
          class="hover:text-gray-200"
          :class="window.location.pathname.includes('index') ? 'font-bold underline' : ''"
        >
          Home
        </a>
        <a
          href="watchList.html"
          class="hover:text-gray-200"
          :class="window.location.pathname.includes('watchlist') ? 'font-bold underline' : ''"
        >
          Watchlist
        </a>
      </div>
    </div>
  </nav>

  <!-- Back Button -->
  <div class="max-w-7xl mx-auto px-4 py-2 sticky top-4 z-50">
    <button
      onclick="window.history.back()"
      class="bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 px-4 py-2 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition shadow"
    >
      ‚Üê Back
    </button>
  </div>

  <!-- Movie Details Section -->
  <div class="max-w-7xl mx-auto px-4 py-6" x-data="movieComponent" x-init="init()">

    <!-- Movie Info -->
    <template x-if="movie">
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow mb-6">

        <!-- Poster + Info Layout -->
        <div class="flex flex-col md:flex-row gap-6">

          <!-- Movie Poster -->
          <img
            :src="movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 'https://via.placeholder.com/500x750'"
            alt="Movie Poster for 'movie.title'"
            class="w-full md:w-64 rounded-lg mx-auto md:mx-0"
          />

          <!-- Movie Details -->
          <div class="flex-1">
            <h1 class="text-3xl font-bold mb-2" x-text="movie.title"></h1>
            <p class="text-gray-500 dark:text-gray-400 mb-2" x-text="movie.release_date"></p>
            <p class="text-gray-500 dark:text-gray-400 mb-4" x-text="'Runtime: ' + movie.runtime + ' minutes'"></p>
            <p class="text-gray-500 dark:text-gray-400 mb-4">
              ‚≠ê Average Rating: <span x-text="movie.vote_average ? (movie.vote_average / 2).toFixed(1) : 'N/A'"></span> / 5
            </p>

            <!-- Star Rating -->
            <div class="flex flex-wrap items-center space-x-1 mb-4">
              <template x-for="star in [1,2,3,4,5]" :key="star">
                <svg
                  @click="rateMovie(star)"
                  :class="userRating >= star ? 'text-yellow-400' : 'text-gray-400'"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                  class="w-6 h-6 cursor-pointer transition transform hover:scale-110"
                >
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.948a1 1 0 00.95.69h4.147c.969 0 1.371 1.24.588 1.81l-3.36 2.44a1 1 0 00-.364 1.118l1.287 3.948c.3.921-.755 1.688-1.54 1.118l-3.36-2.44a1 1 0 00-1.175 0l-3.36 2.44c-.785.57-1.84-.197-1.54-1.118l1.287-3.948a1 1 0 00-.364-1.118l-3.36-2.44c-.783-.57-.38-1.81.588-1.81h4.147a1 1 0 00.95-.69l1.286-3.948z" />
                </svg>
              </template>
            </div>

            <!-- Movie Overview -->
            <p class="mb-4" x-text="movie.overview"></p>

            <!-- Add to Watchlist Button -->
            <button
              @click="addToWatchlist(movie)"
              class="bg-green-600 dark:bg-green-700 text-white px-4 py-2 rounded hover:bg-green-700 transition"
            >
              + Add to Watchlist
            </button>
          </div>
        </div>
      </div>
    </template>

    <!-- Main Cast Section -->
    <div x-show="cast.length > 0">
      <h2 class="text-2xl font-bold mb-4">Main Cast</h2>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 lg:grid-cols-6 gap-4">
        <!-- Loop through first 10 cast members -->
        <template x-for="member in cast.slice(0, 10)" :key="member.id">
          <div class="bg-white dark:bg-gray-800 p-3 rounded-lg shadow text-center">
            <!-- Actor Image -->
            <img
              :src="member.profile_path ? `https://image.tmdb.org/t/p/w200${member.profile_path}` : 'https://via.placeholder.com/200x300?text=No+Image'"
              :alt="member.name"
              class="w-full h-48 object-cover rounded-lg mb-2"
            />
            <h3 class="font-semibold text-sm truncate" x-text="member.name"></h3>
            <p class="text-xs text-gray-500 dark:text-gray-400 truncate" x-text="member.character"></p>
          </div>
        </template>
      </div>
    </div>

  </div>
</body>
</html>
